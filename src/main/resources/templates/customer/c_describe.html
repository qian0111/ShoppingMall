<!-- de5e55 -->
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>buyall</title>
    <!-- ================= Favicon ================== -->
    <!-- Standard -->
    <link rel="shortcut icon" href="http://placehold.it/64.png/000/fff">
    <!-- Retina iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="144x144" href="http://placehold.it/144.png/000/fff">
    <!-- Retina iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="114x114" href="http://placehold.it/114.png/000/fff">
    <!-- Standard iPad Touch Icon-->
    <link rel="apple-touch-icon" sizes="72x72" href="http://placehold.it/72.png/000/fff">
    <!-- Standard iPhone Touch Icon-->
    <link rel="apple-touch-icon" sizes="57x57" href="http://placehold.it/57.png/000/fff">
    <!-- Styles -->
	<link rel="stylesheet" type="text/css" href="/sm/static/layui/css/layui.css">
    <link href="/sm/static/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/sm/static/css/themify-icons.css" rel="stylesheet">
    <link href="/sm/static/css/mmc-chat.css" rel="stylesheet" />
    <link href="/sm/static/css/sidebar.css" rel="stylesheet">
    <link href="/sm/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/sm/static/css/nixon.css" rel="stylesheet">
    <link href="/sm/static/css/lobipanel.min.css" rel="stylesheet">
    <link href="/sm/static/css/style.css" rel="stylesheet">
	<style>
		.myabsolute{
			width: 480px;
			height: 320px;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="row clearfix">
			<div class="col-md-12 column">
				<div class="header">
					<div class="pull-left">
						<div class="logo">
							<a >
								<img id="logoImg" src="/sm/static/images/welcome.png" alt="" />
							</a>
						</div>
					</div>
					<div class="pull-right p-r-15">
						<ul>
							<li class="header-icon dib input-group input-group-default">
								<input type="text" placeholder="请输入内容" name="Search" class="form-control " style="height: 30px; width: 300px;">
								<i class="ti-search" style="padding-left: 12px;" onclick=""></i>
							</li>
							<span class="header-icon dib" style="width: 50px;"></span>
							<li class="header-icon dib">
								<i class="ti-shopping-cart"></i>
								<span class="user-avatar" href="">购物车</span>
							</li>
							<li class="header-icon dib">
								<i class="ti-clipboard"></i>
								<span class="user-avatar" href="">我的订单</span>
							</li>
							<li class="header-icon dib">
								<!-- <img class="avatar-img" src="img/avatar/1.jpg" alt="" /> -->
								<i class="ti-user"></i>
								<span class="user-avatar" th:text="${userName}">用户未登录</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="row clearfix" style="padding-top:105px; height:710px;background-color: white" >
			<div class="col-md-12 column">
				<div class="row clearfix">
					<div class="col-md-6 column" style="padding-left: 50px; padding-top: 50px">
						<img class="myabsolute" alt="图片" th:src="@{/static/images/}+${goods.gImage}"/>
					</div>
					<div class="col-md-6 column">
						<br><br>
						<div style="height: 100px;width: 500px">
							<h1 style="font-size: 25px; color: rgba(12,12,12,0.89)" th:text="${goods.gName}"></h1>
						</div>
						<h1 style="padding-bottom: 10px;">
							<span style="font-size: 26px; color: red;padding-left: 330px;"th:text="${goods.gPrice}+'￥'"></span>
							<span style="padding-left: 10px;font-size: 14px;" th:text="'库存'+${goods.gCount}+'件'"></span>
						</h1>
						<h1>
							<span style="font-size: 16px;padding-left: 320px;">购买数量：</span>
							<a class="layui-icon layui-icon-subtraction" onclick="decrease()"></a>
							<input id="number" class="input" style="width: 40px; text-align: right;font-size: 17px;" value="1"/>
							<a class="layui-icon layui-icon-addition" onclick="increase()"></a>
						</h1>
						<br>
						<span style="padding-left: 300px;"></span>
						<button type="button" class="btn btn-default" onclick="addCart()">加入购物车</button>
						<span style="padding-left: 10px;"></span>
						<button type="button" class="btn btn-danger " onclick="buyNow()">立即购买</button>
					</div>
				</div>
			</div>
		</div>	
	</div>
</body>
<script src="/sm/static/js/jquery-1.9.1.min.js"></script>
<!-- /# content wrap -->
<script src="/sm/static/js/jquery.min.js"></script>
<!-- jquery vendor -->
<script src="/sm/static/js/jquery.nanoscroller.min.js"></script>
<!-- nano scroller -->
<script src="/sm/static/js/sidebar.js"></script>

<script src="/sm/static/js/bootstrap.min.js"></script>
<!-- bootstrap -->
<script src="/sm/static/js/mmc-common.js"></script>
<script src="/sm/static/js/mmc-chat.js"></script>
<!-- Chart js -->
<script src="/sm/static/js/Chart.bundle.js"></script>
<script src="/sm/static/js/chartjs-init.js"></script>
<!-- // Chart js -->
<!--  Datamap -->
<script src="/sm/static/js/d3.min.js"></script>
<script src="/sm/static/js/topojson.js"></script>
<script src="/sm/static/js/datamaps.world.min.js"></script>
<script src="/sm/static/js/datamap-init.js"></script>
<script src="/sm/static/js/lobipanel.js"></script>
<!-- // Datamap -->
<script src="/sm/static/js/scripts.js"></script>
<script src="/sm/static/layui/layui.js"></script>
<script>
	function increase(){
		var num = parseInt($("#number").val());
		num = num + 1;
		$("#number").attr("value",num);
	}
	function decrease(){
		var num = parseInt($("#number").val());
		if(num == 1){
			return;
		}
		num = num - 1;
		$("#number").attr("value",num);
	}
	function buyNow(){
		var buyCount = parseInt($("#number").val());
		var gId = [[${goods.id}]];
		var uId = [[${uId}]];
		$.ajax({
			url: "payData",//请求地址
			type:"POST",
			data: {"buyCount":buyCount, "gId":gId, "uId":uId},
			success:function(str){//请求成功之后的回调函数，接收服务端响应的数据
				var url = "payPage?buyCount="+str.buyCount+"&gId="+str.gId+"&uId="+str.uId;
				console.info(url);
				window.location.href = url;
			},
			error:function(){//请求失败之后的回调函数

			}
		})
	}
	function addCart(){
		var buyCount = parseInt($("#number").val());
		var gId = [[${goods.id}]];
		var uId = [[${uId}]];
		$.ajax({
			url: "addCart",//请求地址
			type:"POST",
			data: {"buyCount":buyCount, "gId":gId, "uId":uId},
			success:function(str){//请求成功之后的回调函数，接收服务端响应的数据
				alert(str.msg);
			},
			error:function(){//请求失败之后的回调函数

			}
		})
	}
</script>
</html>
